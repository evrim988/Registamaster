@{
  ViewData["Title"] = "FoodChartGraph";
}
<h1>Ofis Yönetin Dashboard</h1>
<div class="main-content">
  <div class="row">
    <div class="col-12" style="padding-top: 40px; padding-right: 40px; padding-left: 40px;">
      <div class="card card-primary">
        <div class="card-content collapse show">
          <div class="card-body card-dashboard">
            <h3>Yemek Çizelgesi Grafiği</h3>
            <div class="demo-container">
              <label for="year" class="form-label">Yıl Seçimi:</label>
              <select id="year" class="form-select form-select-lg mb-3"></select>

              <!-- Styles -->
              <style>
                #chartdiv {
                  width: 100%;
                  height: 500px;
                }
              </style>



              <!-- Resources -->
              <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
              <script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
              <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>

              <!-- Chart code -->
              <script>


                am5.ready(function () {

                  // Create root element
                  // https://www.amcharts.com/docs/v5/getting-started/#Root_element
                  var root = am5.Root.new("chartdiv");

                  // Set themes
                  // https://www.amcharts.com/docs/v5/concepts/themes/
                  root.setThemes([
                    am5themes_Animated.new(root)
                  ]);

                  // Create chart
                  // https://www.amcharts.com/docs/v5/charts/xy-chart/
                  var chart = root.container.children.push(am5xy.XYChart.new(root, {
                    panX: true,
                    panY: true,
                    wheelX: "panX",
                    wheelY: "zoomX",
                    pinchZoomX: true,
                    paddingLeft: 0,
                    paddingRight: 1
                  }));

                  // Add cursor
                  // https://www.amcharts.com/docs/v5/charts/xy-chart/cursor/
                  var cursor = chart.set("cursor", am5xy.XYCursor.new(root, {}));
                  cursor.lineY.set("visible", false);


                  // Create axes
                  // https://www.amcharts.com/docs/v5/charts/xy-chart/axes/
                  var xRenderer = am5xy.AxisRendererX.new(root, {
                    minGridDistance: 30,
                    minorGridEnabled: true
                  });

                  xRenderer.labels.template.setAll({
                    rotation: -90,
                    centerY: am5.p50,
                    centerX: am5.p100,
                    paddingRight: 15
                  });

                  xRenderer.grid.template.setAll({
                    location: 1
                  })

                  var xAxis = chart.xAxes.push(am5xy.CategoryAxis.new(root, {
                    maxDeviation: 0.3,
                    categoryField: "MonthName",
                    renderer: xRenderer,
                    tooltip: am5.Tooltip.new(root, {})
                  }));

                  var yRenderer = am5xy.AxisRendererY.new(root, {
                    strokeOpacity: 0.1
                  })

                  var yAxis = chart.yAxes.push(am5xy.ValueAxis.new(root, {
                    maxDeviation: 0.3,
                    renderer: yRenderer
                  }));

                  // Create series
                  // https://www.amcharts.com/docs/v5/charts/xy-chart/series/
                  var series = chart.series.push(am5xy.ColumnSeries.new(root, {
                    name: "Series 1",
                    xAxis: xAxis,
                    yAxis: yAxis,
                    valueYField: "value",
                    sequencedInterpolation: true,
                    categoryXField: "MonthName",
                    tooltip: am5.Tooltip.new(root, {
                      labelText: "{valueY}"
                    })
                  }));

                  series.columns.template.setAll({ cornerRadiusTL: 5, cornerRadiusTR: 5, strokeOpacity: 0 });
                  series.columns.template.adapters.add("fill", function (fill, target) {
                    return chart.get("colors").getIndex(series.columns.indexOf(target));
                  });

                  series.columns.template.adapters.add("stroke", function (stroke, target) {
                    return chart.get("colors").getIndex(series.columns.indexOf(target));
                  });

                  


                  $.ajax({
                    url: "/FoodChart/FoodChartGraph",
                    method: "POST",
                    data: { year: 2024 },
                    success: function (response) {
                      console.log(response);
                      //console.log(JSON.parse(response));

                      //var data = JSON.parse(response);
                    },
                    error: function (xhr, status, error) {
                      console.error("Ajax hatası:", status, error);
                    }
                  });
                  //console.log(" qw");
                  //console.log(data);
                  // Set data
                  // var data = [{
                  //   country: "OCAK",
                  //   value: 0
                  // }, {
                  //   country: "ŞUBAT",
                  //   value: 0
                  // }, {
                  //   country: "MART",
                  //   value: 0
                  // }, {
                  //   country: "NİSAN",
                  //   value: 0
                  // }, {
                  //   country: "MAYIS",
                  //   value: 0
                  // }, {
                  //   country: "HAZİRAN",
                  //   value: 0
                  // }, {
                  //   country: "TEMMUZ",
                  //   value: 0
                  // }, {
                  //   country: "AĞUSTOS",
                  //   value: 0
                  // }, {
                  //   country: "EYLÜL",
                  //   value: 0
                  // }, {
                  //   country: "EKİM",
                  //   value: 0
                  // }, {
                  //   country: "KASIM",
                  //   value: 0
                  // }, {
                  //   country: "ARALIK",
                  //   value: 0
                  // }];

                  //xAxis.data.setAll(data);
                  //series.data.setAll(data);


                  // Make stuff animate on load
                  // https://www.amcharts.com/docs/v5/concepts/animations/
                  series.appear(1000);
                  chart.appear(1000, 100);

                }); // end am5.ready()

              </script>
              <!-- HTML -->

              <div id="chartdiv"></div>


            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

@section scripts {
  <script src="/js/Page/FoodChart/FoodChartGraph.js"></script>
}
