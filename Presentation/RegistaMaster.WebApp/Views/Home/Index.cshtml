@using RegistaMaster.Domain.Enums
@model RegistaMaster.Domain.DTOModels.Entities.ActionModels.ActionDTO

@{
    ViewData["Title"] = "Home Page";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@{
    var user = session.GetUser();
}


<link href="~/Modernize/DevextremeCss/css/dx.common.css" rel="stylesheet" />
<link href="~/Modernize/DevextremeCss/css/dx.light.css" rel="stylesheet" />


<div class="main-content">
    <div class="row">
        <div class="col-12" style="padding-top: 40px; padding-right: 40px; padding-left: 40px;">
            <div class="card card-primary">
                <div class="card-header">
                </div>
                <div class="card-content collapse show">
                    <div class="heading-elements">
                    </div>
                    <div class="card-body card-dashboard">
                        <h3>Aksiyonlar</h3>
                        <div class="demo-container">
                            <div id="actionsGridContainer"></div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

@* Aksiyon Durumu Güncelleme *@
<div class="modal fade" id="changeActionStatus" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Değiştirmek İstediğiniz Durumu Seçiniz</h5>
            </div>
            <div class="modal-body">
                <input hidden id="actionID" />
                <select asp-for="ActionStatus" id="actionSelect" asp-items="Html.GetEnumSelectList<RegistaMaster.Domain.Enums.ActionStatus>()" class="form-control select2"></select>
            </div>
            <div class="modal-footer">
                <button type="button" onclick="closeModal()" class="btn btn-secondary" data-bs-dismiss="modal">Kapat</button>
                <button type="button" onclick="ChanceActionStatus()" class="btn btn-primary">Kaydet</button>
            </div>
        </div>
    </div>
</div>

<div class="container">
    @switch (user.Authorization)
    {
        case AuthorizationStatus.Admin:
            <partial name="ChartPartials/AdminChartPartial" />
            break;
        case AuthorizationStatus.TeamsLeader:
            <partial name="ChartPartials/TeamLeaderChartPartial" />
            break;
        case AuthorizationStatus.Developer:
            <partial name="ChartPartials/DeveloperChartPartial" />
            break;
    }
</div>

@* Aksiyon Detayını Gösteren Modal *@
<div class="modal fade" id="ActionDetail" tabindex="-1" role="dialog" aria-labelledby="büyükModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="büyükModalLabel">Aksiyon Detayı</h5>

            </div>
            <div class="modal-body">
                <div class="row">

                    <div class="form-group col-md-6">
                        <label style="font-weight:bold;" class="col-md-2 col-form-label">Açılma Tarihi:</label>
                        <input asp-for="OpeningDate" type="date" required class="form-control" name="OpeningDate" />
                        <h1></h1>
                    </div>
                    <div class="form-group col-md-6">
                        <label style="font-weight:bold;" class="col-md-2 col-form-label">Hedef Tarih:</label>
                        <input asp-for="EndDate" type="date" required class="form-control" name="EndDate" />
                        <h1></h1>
                    </div>
                    <div class="form-group col-md-6">
                        <label style="font-weight:bold;" class="col-form-label">Aksiyonu Açan Kişi:</label>
                            <input asp-for="LastModifiedBy" type="text" required class="form-control" name="LastModifiedBy" />
                            <h1></h1>
                    </div>
                    <div class="form-group col-md-6">
                        <label style="font-weight:bold;padding-top: 9px;padding-bottom: 9px;">Konu:</label>
                        <input asp-for="ActionDescription" type="text" required class="form-control" name="ActionDescription" />
                        <h1></h1>
                    </div>
                    <div class="form-group col-md-6">
                        <label style="font-weight:bold;">Açıklama:</label>
                        <textarea asp-for="Description" type="text" required class="form-control" name="Description"></textarea>
                    </div>
                </div>
               
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="/js/Page/Home/Index.js"></script>
}